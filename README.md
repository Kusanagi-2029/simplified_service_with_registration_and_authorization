# simplified_service_with_registration_and_authorization
Упрощенный сервис с регистрацией и авторизацией

## Запуск:
### PHP Storm:
Запустить `index.html`

### Docker:
Из директории проекта:
```bash
docker-compose up
```

### Зависимости:
1. Устанавливаем pgSQL:
   - https://www.postgresql.org/
2. Устанавливаем php и composer:
  - https://www.php.net/
  - https://getcomposer.org/
3. Устанавливаем зависимости:
```bash
composer install
```
4. Далее устанавливаем Docker (Windows):
   - https://www.docker.com/
5. Запускаем приложение Docker;
В корне проекта открываем терминал (н-р, через PHP-Storm) и поднимаем докер:
```bash
docker-compose up
```

6. В DBeaver ил другой СУБД исполняем SQL-скрипт:
```sql
CREATE TABLE public.users (
	user_id int NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	email varchar UNIQUE NOT NULL,
	password_hash varchar NOT NULL,
	CONSTRAINT users_pk PRIMARY KEY (user_id)
);

-- Column comments

COMMENT ON COLUMN public.users.email IS 'email';
COMMENT ON COLUMN public.users.password_hash IS 'хэш пароля';
```

7. Доступно приложение по адресу:
http://localhost:80/


## Структура проекта
```
simplified_service_with_registration_and_authorization/
│
├── nginx/
│   ├── html/
│   │   ├── styles.css
│   │   └── index.html
│   └── nginx.conf
│
├── src/
│   ├── controllers/
│   │   └── UserController.php
│   │
│   ├── models/
│   │   └── User.php
│   │
│   ├── services/
│   │   ├── DBConnection.php
│   │   ├── JWTService.php
│   │   ├── UserRepository.php
│   │   └── UserService.php
│   │
│   └── view/
│       └── authorizedAndRegistered.php
│
├── vendor/
│   └── ЗАВИСИМОСТИ
├── README.md
│  
├── authorize.php
├── register.php
├── feed.php
├── index.html
├── nginx.conf
└── docker-compose.yml
```
